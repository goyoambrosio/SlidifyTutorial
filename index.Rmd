---
title       : Slidify 
subtitle    : A little bit more sysadmin oriented Tutorial
author      : Gregorio Ambrosio
job         : Apr. 17 2018
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : zenburn       # {zenburn, tomorrow, solarized-dark, ...}
widgets     : bootstrap     # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
logo        : goyologo.png  # Graphic files will be in ~/myDeck/assets/img
biglogo     : goyologo.png
license     : by-nc-sa
assets      : {assets: ../../assets}       # Add an assets directory
libraries   : {libraries: ../../libraries} # Add a libraries directory
ext_widgets : {rCharts: [libraries/nvd3, libraries/leaflet, libraries/dygraphs]}
---

```{r,echo=FALSE}
library('knitr')
knit_hooks$set(
  prompt = function(before, options, envir) {
    options(prompt = if (options$engine %in% c('sh','bash')) '$ ' else '> ')
})
```
<!--
If you want to enable automatic prompt generation use
{bash ,prompt=TRUE, eval=FALSE}
{r, prompt=TRUE, eval=FALSE}
-->


## R presentations

R presentations are presentations coded as Rmarkdown and then translated to HTML
using the R programming language framework.

Rmarkdown is a markdown based R syntax that helps make documents in many different formats.

There are many different ways to make *r presentations* in RStudio (`oslides`, `Slidy`, `Beamer`, ...)

Slidify exists as a package with a huge online community and popularity.

Slidify has the most options and flexibility but you mustn't to use it until you
are more comfortable with R packages and general syntax.

*** =pnotes

R presentations are presentations coded as HTML created with the R programming language framework.

Rmarkdown is a markdown based R syntax that helps make documents in many different formats.

In RStudio, you simply create a new rmarkdown file, write your text/code, and
runs `knitr` and `pandoc` to turn your raw text into a complete HTML, named *r
presentations*, or PDF document.

There are many different ways to make *r presentations* in RStudio but three main
choices: `ioslides`, `Slidy`, and `Beamer`.

On the other hand, Slidify exists as a package with a huge online community and popularity.

Slidify has the most options and flexibility. This package is clearly aimed at
the intermediate to advanced R community and you mustn't to use slidify until
you are more comfortable with R packages and general syntax.

Slidify also uses `knitr` but renders HTML pages by itself without using `pandoc`

References:

[Comparisons between ioslides and Slidify in R Markdown Presentation](http://yintingchou.com/others/2017/05/26/ioslides-slidy.html)

[Introduction to Presentations in Rmarkdown](http://data-analytics.net/cep/Schedule_files/presentations_demo.html**

---

## What is Slidify

Slidify is a tool that makes it easy to create, customize and publish,
reproducible HTML5 slide decks using R Markdown.

Slidify helps create, customize and share, elegant, dynamic and interactive
HTML5 documents using R Markdown.

It is is an almagamation of other technologies including knitr, Markdown, and
several javascript libaries

It allows embedded code chunks and mathematical formulas

You can view slidify presentations with any web browser and share them easily
on Github, Dropbox, or your own website

*** =pnotes

Slidify uses [whisker](https://github.com/edwindj/whisker) to render the final
html by passing the parsed data to the layout file.

Whisker is a [{{Mustache}}](http://mustache.github.io/) implementation in R
confirming to the Mustache specification. 

Mustache is a logicless templating language, meaning that no programming source
code can be used in your templates.

--- .segue bg:grey

# Set up your workspace

---

## Things you need 

To work with slidify you need the right environment:

- A language and environment for statistical computing and graphics:
  [R](https://www.r-project.org/)
- An integrated development environment (IDE) for R:
  [RStudio](https://www.rstudio.com/)
- Optionally a powerful more-than-an-editor like
  [Emacs](https://www.gnu.org/software/emacs/) customized with
  [Spacemacs](http://spacemacs.org/), [ESS](https://ess.r-project.org/) and
  [Polymode](https://github.com/vspinu/polymode).
- A way to install R packages under development (i.e. slidify):
  [devtools](https://github.com/r-lib/devtools)

Preferably in Linux!

*** =pnotes

[Spacemacs](http://spacemacs.org/) is an open source Emacs distribution, aimed
at providing a bridge between Emacs and Vim.

[ESS](https://ess.r-project.org/) (Emacs Speaks Statistics) is an add-on package
for Emacs. It is designed to support editing of scripts and interaction with
various statistical analysis programs such as R.

[Polymode](https://github.com/vspinu/polymode) is an emacs package that offers
generic support for multiple major modes inside a single emacs buffer. It is
necessary to allow the mix of modes present in Rmd files, specially `markdown`
and `R` modes but also other major modes.

---

## How to install R

The Ubuntu archives on CRAN are signed with the key of “Michael Rutter". To add
the key to your system run:

```sh
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9
```

edit the `source.list` file

```sh
sudo vim /etc/apt/sources.list
```

and add the corresponding source to your operating system version [Ubuntu 16.04+|17.10+]

```sh
deb https://cloud.r-project.org/bin/linux/ubuntu [xenial|artful]/
```

Finally, to install the complete R system, run:

```sh
sudo apt update
sudo apt install r-base
```

---

## How to install RStudio

[Download](https://www.rstudio.com/products/rstudio/download/) RStudio.

Install it from command prompt 

```sh
# For Debian based
sudo dpkg -i rstudio-xenial-1.1.447-amd64.deb
# install dependencies
sudo apt install -f
```

Or click deb file through the file manager. Ubuntu will install it and its dependencies.

---

## How to install Emacs and Spacemacs

As usual, run this command

```bash
sudo apt install emacs
```

Download [SourceCode Pro
font](https://github.com/adobe-fonts/source-code-pro/archive/2.030R-ro/1.050R-it.tar.gz),
uncompress and install. (it takes some seconds ... don't suspect, it's working)

```bash
sudo mv ~/Downloads/source-code-pro-2.030R-ro-1.050R-it/OTF /usr/share/fonts/opentype
sudo fc-cache -f
```

To install Spacemacs type

```bash
git clone https://github.com/syl20bnr/spacemacs ~/.emacs.d
```

The first time you run Spacemacs you must to answer three initial configuratation questions.


---

## How to install ESS and polymode major modes for Emacs

Edit `.spacemacs`, usually under your home directory.

1. Activate `ess` configuration layer  
```
dotspacemacs-configuration-layers
'(ess)
```

2. Add `polymode` package as additional package  
```
dotspacemacs-additional-packages '(polymode)
```

3. Add extension associations  
```
dotspacemacs/user-config ()
(add-to-list 'auto-mode-alist '("\\.Rmd$" . poly-markdown+r-mode))
```

---

## How to install devtools

Previously you need to install some libraries in your system:

```{bash,eval=FALSE,prompt=TRUE}
sudo apt-get install build-essential libcurl4-gnutls-dev libxml2-dev libssl-dev
```

Now run R as `sudo` and install the package

```sh
$ sudo -i R
```

```r
> install.packages('devtools')
```

---

## How to install slidify 

Now you are ready to install Slidify

Slidify is not on CRAN and needs to be installed from github using the `devtools`
package. 

```r
pkgs <- c("slidify", "slidifyLibraries", "rCharts")
devtools::install_github(pkgs, "ramnathv")
```

As an alternative http://slidify.github.io recommends installing the `dev` version of the package

```r
install_github(pkgs, 'ramnathv', ref = 'dev')
```

Now you are ready to create your first slidify presentation.

--- 

## Create a new Deck

Each presentation is called a 'deck'. To create a new deck open R, set
your working directory and use the `author` command.

```r
> setwd("/path/to/")
> require(slidify)
> author("myDeck")
```

`/path/to/myDeck` is created.

Create a R Project from Existing Directory

```
File -> New Project -> Existing Directory -> /path/to/myDeck -> Create Project
```

A file called `myDeck.Rproj` will be created under `/path/to/myDeck**.

*** =pnotes

Then, automatically:

- A directory with the name of your project is created inside of your current directory.
- Inside of this directory an assets directory and a file called “index.Rmd” is created.
- The assets directory is populated with the following empty folders: css, img, js, and layouts.

---



## Add version control with Git 

If git is installed, then the `author` command also initializes a git repository,
switchs to a `gh-pages` branch and commit all changes.

Before uploading your deck to your favourite Git cloud provider create
`.gitignore` to avoid version control for non essential files.

```sh
cd /path/to/myDeck
touch .gitignore
vim .gitignore
```

Add your ignored extensions

```sh
# RStudio files #
.Rproj.user
.Rhistory
.RData
.Ruserdata
# ...
```

---

## Upload the new repository

Create an empty Repository, e.g. `myDeck` in BitBucket or GitHub. With an empty
repository a default branch called `master` won't be created. Then `push` the
local `myDeck` repository to the remote `myDeck` repo. Note that a new branch
called `gh-pages` has been created.

```sh
cd /path/to/myDeck
git add .
git commit -am "Initial commit"
git remote add origin_github https://github.com/username/myDeck.git
git remote add origin_bitbucket https://username@bitbucket.org/username/myDeck.git
git push -u origin_[github|bitbucket] --all
git push -u origin_[github|bitbucket] --tags
```

Now you can work with your new repository as usual

---

## Cloning your repo


To clone the repo on your machine take in account that you'll need to clone `gh-pages` branch

```sh
git clone -b gh-pages https://github.com/username/myDeck.git
```

or

```sh
git clone -b gh-page https://username@bitbucket.org/username/myDeck.git
```

---

## Editing with Emacs and RStudio

index.Rmd is the only file you need to edit and for that you have two ways:

- Using RStudio opening the project file, e.g. `/path/to/myDeck/myDeck.Rproj`
- Using Emacs with ESS/Polymode major mode.

To take advantage of their editing capabilities RStudio and Emacs can be used simultaneously.

You can enable Emacs keybindings within RStudio using the Code section of the
Global Options dialog.

Changes made to the edited files will be updated in real time both in Emacs and RStudio.

--- 


## Slidify it !

```r
slidify("index.Rmd")
browseURL("index.html")
```

--- .segue bg:grey

# Edit slides

---

## index.Rmd = YAML + R Markdown

index.Rmd is the R Markdown document which you will use to compose the content of your presentation.

It's composed of a YAML section and a body section.

[YAML metadata](https://github.com/ramnathv/slidify/wiki/Page-Properties)
includes the `title`, `subtitle`, `author`, and `job` of the author. Also
includes what slide `framework` you wish to use, which code `highlighter` you
wish to use, and any `widgets` you want to include.

In addition it can include other fields like a `logo` to appear in your title
slide under logo, the path to your `assets` folder and the paths to any other
folders you may be using under url, and the specific theme for your code
highlighter of choice under `hitheme`.

Under YAML you can include your slides just using R Markdown to write them.

[R Markdown](https://rmarkdown.rstudio.com/) is a file format for making dynamic
documents with R. An R Markdown document is written in
[markdown](https://en.wikipedia.org/wiki/Markdown) and contains chunks of
embedded R (and other languages** code.

*** =pnotes

YAML is a superset of JSON.

---

## How YAML looks

```YAML
---
title       : Slidify 
subtitle    : A little bit more sysadmin oriented Tutorial
author      : Gregorio Ambrosio
job         : Apr. 17 2018
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : zenburn       # {zenburn, tomorrow, solarized-dark, ...}
widgets     : bootstrap     # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
logo        : goyologo.png  # Graphic files will be in ~/myDeck/assets/img
biglogo     : goyologo.png
license     : by-nc-sa
assets      : {assets: ../../assets}       # Add an assets directory
libraries   : {libraries: ../../libraries} # Add a libraries directory
ext_widgets : {rCharts: [libraries/nvd3, libraries/leaflet, libraries/dygraphs]}
---
```

---

## Slides

Your first slide begins under YAML and looks like this:

```Rmd
--- .class #id

## Slide Title

- Whatever you put after `##` will be the title of the slide.
- Each slide needs to be preceeded by an empty line followed by `---`
  this denotes the beginning of a new slide and the end of the previous slide.
- `.class #id` are `CSS` attributes you can use to customize the slide.
- Whatever you put between `##` and `---` is up to you! As long as it is
  valid R Markdown or `HTML`.

```

---

## Slide customization

Slide attributes are valid YAML and are written after `---`

```
.<class_name> = class:<class_name>
#<id_value> = id:<id_value>
```

e.g. Next three lines are equivalent
```
.segue #myId bg:blue 
class:segue id:myId bg:blue
{class: segue, id: myId, bg: blue}
```

For clarity we will use the third option

---

## Slide attributes

| VARIABLE       | DESCRIPTION                           |
|----------------|---------------------------------------|
| slide.title    | The title of the slide with no markup |
| slide.header   | The title of the slide with markup    |
| slide.level    | The title header level (h1 - h6)      |
| slide.content  | The contents of the slide sans header |
| slide.html     | The contents of the slide with header |
| slide.num      | The number of the slide               |
| slide.id       | The id assigned to the slide          |
| slide.class    | The class assigned to the slide       |
| slide.bg       | The background assigned to the slide  |
| slide.myblock  | The slide block named myblock         |
| slide.blocks   | The slide blocks which are not named  |
| slide.rendered | he rendered slide                     |

---&twocol w1:40% w2:60%

## Two Column Layout

This slide has two columns
    
*** =left
    
- point 1
- point 2
- point 3
    
*** =right

- point 1
- point 2
- point 3

---

## Code hightlighting

We want that our code blocks look good. Syntax highlighting let us to make code clear and understable.

Usage:

\`\`\`<language>
... code
\`\`\`

knitr converts `{<language_name> ...}` to `<language_name>` but the language
name in kinitr corresponds to the engine that executes the code but does not
have to correspond to the name used by hightlight.js

---

## Using Hightlight.js

Highlight.js is a syntax highlighter written in JavaScript. It works with pretty
much any markup, doesn’t depend on any framework and has automatic language
detection.

Main features

- 176 languages and 79 styles
- automatic language detection
- multi-language code highlighting
- available for node.js
- works with any markup
- compatible with any js framework

[hightlight.js demo](https://highlightjs.org/static/demo/)
[CSS classes reference](http://highlightjs.readthedocs.io/en/latest/css-classes-reference.html)


---

## Knitr

The [knitr](https://yihui.name/knitr/demo/engines/) package was designed based
on the idea of “Literate Programming” (Knuth 1984), which allows you to
intermingle program code with text in a source document.

When knitr compiles a document, the program code (in code chunks) will
be extracted and executed, and the program output will be displayed together
with the original text in the output document.

knitr support a lot of computer languages that implemented in [knitr language
engines](https://yihui.name/knitr/demo/engines/**.

---

## Running bash scripts

Run bash scripts

    ```{r,eval=FALSE}
    # should exist
    Sys.which('bash')
    Sys.which('sh')
    ```

Does `bash` work?

    ```{r test-bash, engine='bash',eval=FALSE}
    echo hello world
    echo 'a b c' | sed 's/ /\|/g'
    # number of lines
    awk 'END{print NR;}' 027-engine-bash.Rmd
    ```

How about `sh`?

    ```{r test-sh, engine='sh',eval=FALSE}
    # run wc on all engine examples
    ls | grep engine | head -n8 | xargs wc
    ```

---

## Presenter display and presenter notes

You can define speaker notes within any slide by adding the line `*** =pnotes`
before it. Here is an example of a slide with speaker notes.

You can view speaker notes by pressing the key `p` which acts as a toggle and
automatically opens the presenter view. 

For `io2012`, you need to add `?presentme=true` to the presentation url, which
will then open the presenter view.

You can also include an image in the presenter display using markdown syntax,
e.g.
`![](http://codingsomething.files.wordpress.com/2013/02/screenshot.png?w=652)`

    *** =pnotes
    Presenter notes
    ![](http://codingsomething.files.wordpress.com/2013/02/screenshot.png?w=652)



*** =pnotes

Presenter notes  
![](http://codingsomething.files.wordpress.com/2013/02/screenshot.png?w=652)

---


## Comment out a slide

Change 

    ---
    Slide 1 content
    ---
    Slide 2 content
    ---

by

    ---
    <!--
    Slide 1 content
    -->
    Slide 2 content
    ---

---

## Tutorials

1. [Introduction](http://slidify.github.io/workshops/tutorials/01)
2. [Frameworks](http://slidify.github.io/workshops/tutorials/02)
3. [Layouts](http://slidify.github.io/workshops/tutorials/03)
4. [Widgets](http://slidify.github.io/workshops/tutorials/04)

--- .class #id

## Read-And-Delete

1. Edit YAML front matter
2. Write using R Markdown
3. Use an empty line followed by three dashes to separate slides!

